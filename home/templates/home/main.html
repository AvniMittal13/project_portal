{% extends 'home/base.html' %}
{% block content %}
{% load crispy_forms_tags %}
<div class="row">

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-warning shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                            <a href="{% url 'projects-applied'%}" style="color:#EE7210">Projects Applied</a>
                        </div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">{{ num_projects_applied }}</div>
                    </div>
                    <!-- <div class="col-auto">
                            <i class="fas fa-comments fa-2x text-gray-300"></i>
                        </div> -->
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-warning shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                            <a href="{% url 'projects-floated'%}" style="color:#EE7210">Projects Floated</a>
                        </div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">{{ num_projects_floated }}</div>
                    </div>
                    <!-- <div class="col-auto">
                            <i class="fas fa-comments fa-2x text-gray-300"></i>
                        </div> -->
                </div>
            </div>
        </div>
    </div>


    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-warning shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                            <a href="{% url 'projects-requested'%}" style="color:#EE7210">Projects Requested</a>
                        </div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">{{ num_projects_req }}</div>
                    </div>
                    <!-- <div class="col-auto">
                            <i class="fas fa-comments fa-2x text-gray-300"></i>
                        </div> -->
                </div>
            </div>
        </div>
    </div>


    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-warning shadow h-100 py-2">
            <div class="card-body">
                <div class="row no-gutters align-items-center">
                    <div class="col mr-2">
                        <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                            <a href="{% url 'projects-starred'%}" style="color:#EE7210">Projects Starred</a>
                        </div>
                        <div class="h5 mb-0 font-weight-bold text-gray-800">{{ user.profile.starred_projects.count }}
                        </div>
                    </div>
                    <!-- <div class="col-auto">
                            <i class="fas fa-comments fa-2x text-gray-300"></i>
                        </div> -->
                </div>
            </div>
        </div>
    </div>
</div>
{% if messages %}
{% for message in messages %}
<div class="card-header py-3" >{{message}}</div>
{% endfor %}
{% endif %}


<!-- Filter options -->
<form method="get">
    {{myFilter.form|crispy}}
    <button class="btn btn-primary" type="Submit">Filter</button>
</form>

<style>

	
.blog-card {
  display: flex;
  flex-direction: column;
  margin: 1rem auto;
  box-shadow: 0 3px 7px -1px rgba(0, 0, 0, 0.1);
  margin-bottom: 1.6%;
  background: #fff;
  line-height: 1.4;
  font-family: sans-serif;
  border-radius: 5px;
  overflow: hidden;
  z-index: 0;
}
.blog-card a {
  color: inherit;
}
.blog-card a:hover {
  color: #5ad67d;
}
.blog-card:hover .photo {
  transform: scale(1.3) rotate(3deg);
}
.blog-card .meta {
  position: relative;
  z-index: 0;
  height: 200px;
}
.blog-card .photo {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background-size: cover;
  background-position: center;
  transition: transform 0.2s;
}
.blog-card .details,
.blog-card .details ul {
  margin: auto;
  padding: 0;
  list-style: none;
}
.blog-card .details {
  position: absolute;
  top: 0;
  bottom: 0;
  left: -100%;
  margin: auto;
  transition: left 0.2s;
  background: rgba(0, 0, 0, 0.6);
  color: #fff;
  padding: 10px;
  width: 100%;
  font-size: 0.9rem;
}
.blog-card .details a {
  -webkit-text-decoration: dotted underline;
          text-decoration: dotted underline;
}
.blog-card .details ul li {
  display: inline-block;
}
.blog-card .details .author:before {
  font-family: FontAwesome;
  margin-right: 10px;
  content: "";
}
.blog-card .details .date:before {
  font-family: FontAwesome;
  margin-right: 10px;
  content: "";
}
.blog-card .details .tags ul:before {
  font-family: FontAwesome;
  content: "";
  margin-right: 10px;
}
.blog-card .details .tags li {
  margin-right: 2px;
}
.blog-card .details .tags li:first-child {
  margin-left: -4px;
}
.blog-card .description {
  padding: 1rem;
  background: #fff;
  position: relative;
  z-index: 1;
}
.blog-card .description h1,
.blog-card .description h2 {
  font-family: Poppins, sans-serif;
}
.blog-card .description h1 {
  line-height: 1;
  margin: 0;
  font-size: 1.7rem;
}
.blog-card .description h2 {
  font-size: 1rem;
  font-weight: 300;
  text-transform: uppercase;
  color: #a2a2a2;
  margin-top: 5px;
}
.blog-card .description .read-more {
  text-align: right;
}
.blog-card .description .read-more a {
  color: #5ad67d;
  display: inline-block;
  position: relative;
}
.blog-card .description .read-more a:after {
  content: "";
  font-family: FontAwesome;
  margin-left: -10px;
  opacity: 0;
  vertical-align: middle;
  transition: margin 0.3s, opacity 0.3s;
}
.blog-card .description .read-more a:hover:after {
  margin-left: 5px;
  opacity: 1;
}
.blog-card p {
  position: relative;
  margin: 1rem 0 0;
}
.blog-card p:first-of-type {
  margin-top: 1.25rem;
}
.blog-card p:first-of-type:before {
  content: "";
  position: absolute;
  height: 5px;
  background: #5ad67d;
  width: 35px;
  top: -0.75rem;
  border-radius: 3px;
}
.blog-card:hover .details {
  left: 0%;
}
@media (min-width: 640px) {
  .blog-card {
    flex-direction: row;
    max-width: 700px;
  }
  .blog-card .meta {
    flex-basis: 40%;
    height: auto;
  }
  .blog-card .description {
    flex-basis: 60%;
  }
  .blog-card .description:before {
    transform: skewX(-3deg);
    content: "";
    background: #fff;
    width: 60px;
    position: absolute;
    left: -10px;
    top: 0;
    bottom: 0;
    z-index: -1;
  }
  .blog-card.alt {
    flex-direction: row-reverse;
  }
  .blog-card.alt .description:before {
    left: inherit;
    right: -10px;
    transform: skew(3deg);
  }
  .blog-card.alt .details {
    padding-left: 25px;
  }
}


.demo-2 {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  max-width: 300px;
}

</style>


<div class="project_cards">

    <h2 style="padding-top: 20px;">Projects :</h2>
    <br>
    <div style="display: flex; flex-wrap: wrap;">
    {% for project in projects %}


    
		<div class="blog-card" style="flex: 1 0 45%; margin: 10px;">
			<div class="meta">
				<div class="photo"
					style="background-image: url(https://storage.googleapis.com/chydlx/codepen/blog-cards/image-1.jpg)">
				</div>
				<ul class="details">
					<li class="author"><a href="#">{{project.FloatedBy}}</a></li>
					<li class="date">Status: {{project.Status}}</li>
					<li class="tags">
						<ul>
							<li><a href="#">{{project.PreRequisite}}</a></li>
						</ul>
					</li>
				</ul>
			</div>
			<div class="description">
				<h1><a href="{% url 'project' project.id %}"> {{ project.Title }} </a></h1>
				<h2>Difficulty level: {{project.Difficulty}}</h2>
				<p class="demo-2"> {{project.Description}}</p>
				<p class="read-more">
					<a href="{% url 'project' project.id %}">Read More</a>
				</p>

                <div style="display: flex; flex-direction: row; justify-content: space-evenly; margin: 15px; ">
                    {% if project.id in user_requested_projects_id %}
                    <a href="{% url 'task-project' project.id projects.number 'Withdraw'%}"><button
                            class="btn btn-primary btn-user btn-block" style="width:100%%; ">Withdraw Request</button></a>
                    {% else %}
                    {% if project.id not in user_projects_id %}
                    <a href="{% url 'task-project' project.id projects.number 'Apply'%}"><button
                            class="btn btn-primary btn-user btn-block" style="width:100%%; ">Apply</button></a>
                    {% else %}
                    <a href="{% url 'task-project' project.id projects.number 'Leave'%}"><button
                            class="btn btn-primary btn-user btn-block" style="width:100%%; ">Leave</button></a>
                    {% endif %}
                    {% endif %}
        
                    
                    {% if project.id not in user_starred_projects_id %}
                    <a href="{% url 'task-project' project.id projects.number 'Star'%}"><button
                            class="btn btn-primary btn-user btn-block" style="width:100%%;">Star</button></a>
                    {% else %}
                    <a href="{% url 'task-project' project.id projects.number 'Unstar'%}"><button
                            class="btn btn-primary btn-user btn-block" style="width:100%%;">Unstar</button></a>
                    {% endif %}
        
                  
                </div>

			</div>
		</div>


    <!-- Collapsable Card Example -->
    <!-- <div class="col-lg-6"> -->
    <!-- Basic Card Example -->
    <!-- <div class="card shadow mb-4" style="flex: 1 0 30%; margin-left: 20px;">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary"><a href="{% url 'project' project.id %}"> 
                </a> </h6>
        </div>
        <div class="card-body" >
           
            <br><br> -->

        
        <!-- </div>
    </div> -->

    
    <!-- </div> -->

    {% endfor %}
    </div>

</div>


{% with request.get_full_path as querystring %}
    {% if projects.has_other_pages %}
        <ul class="pagination">
            {% if projects.has_previous %}
                {% if 'Status' in querystring %}
                    {% if 'page' in querystring %}
                        <li><a href="{{ querystring|slice:":-1" }}{{ projects.previous_page_number }}">&laquo;</a></li>
                    {% else %}
                        <li><a href="{{ querystring }}&page={{ projects.previous_page_number }}">&laquo;</a></li>
                    {% endif %}
                {% else %}
                    <li><a href="/?page={{ projects.previous_page_number }}">&laquo;</a></li>
                {% endif %}
            {% endif %}
            {% for i in projects.paginator.page_range %}
                {% if projects.number == i %}
                <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
                {% else %}
                    {% if 'Status' in querystring %}
                        {% if 'page' in querystring %}
                            <li><a href="{{ querystring|slice:":-1" }}{{ i }}">{{i}}</a></li>
                        {% else %}
                            <li><a href="{{ querystring }}&page={{ i }}">{{i}}</a></li>
                        {% endif %}
                    {% else %}
                        <li><a href="/?page={{ i }}">{{i}}</a></li>
                    {% endif %}
                {% endif %}
            {% endfor %}
            {% if projects.has_next %}
                {% if 'Status' in querystring %}
                    {% if 'page' in querystring %}
                        <li><a href="{{ querystring|slice:":-1" }}{{ projects.next_page_number }}">&raquo;</a></li>
                    {% else %}
                        <li><a href="{{ querystring }}&page={{ projects.next_page_number }}">&raquo;</a></li>
                    {% endif %}
                {% else %}
                    <li><a href="/?page={{ projects.next_page_number }}">&raquo;</a></li>
                {% endif %}
            {% endif %}
        </ul>
    {% endif %}
{% endwith %}
{% endblock content %}